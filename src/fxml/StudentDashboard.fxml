<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.StudentController">
   <top>
      <VBox>
         <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #1a237e; -fx-padding: 15;">
            <Label text="🛡️🎓" style="-fx-text-fill: #ffc107; -fx-font-size: 24px;" />
            <VBox>
               <Label text="EduVault Academic Management System" style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" />
               <Label text="Student Dashboard - Securing Academic Success" style="-fx-text-fill: #ffc107; -fx-font-size: 12px;" />
            </VBox>
            <Region HBox.hgrow="ALWAYS" />
            <VBox alignment="CENTER_RIGHT" spacing="5">
               <Label fx:id="welcomeLabel" text="Welcome, Student" style="-fx-text-fill: white; -fx-font-size: 14px;" />
               <Label fx:id="studentIdLabel" text="ID: 12345" style="-fx-text-fill: white; -fx-font-size: 12px;" />
            </VBox>
            <Button fx:id="logoutButton" text="Logout" onAction="#handleLogout" style="-fx-background-color: #e74c3c; -fx-text-fill: white;" />
         </HBox>
      </VBox>
   </top>
   
   <center>
      <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
         
         <!-- Academic Session Selection -->
         <Tab text="Academic Session">
            <VBox spacing="20" alignment="CENTER">
               <padding>
                  <Insets top="50" right="50" bottom="50" left="50" />
               </padding>
               
               <Label text="Select Academic Session" style="-fx-font-size: 18px; -fx-font-weight: bold;" />
               
               <GridPane hgap="15" vgap="15" alignment="CENTER">
                  <columnConstraints>
                     <ColumnConstraints hgrow="SOMETIMES" minWidth="100" />
                     <ColumnConstraints hgrow="SOMETIMES" minWidth="200" />
                  </columnConstraints>
                  
                  <Label text="Session:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                  <ComboBox fx:id="sessionComboBox" promptText="Select Session" GridPane.columnIndex="1" GridPane.rowIndex="0" maxWidth="Infinity" />
                  
                  <Label text="Semester:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                  <ComboBox fx:id="semesterComboBox" promptText="Select Semester" GridPane.columnIndex="1" GridPane.rowIndex="1" maxWidth="Infinity" />
               </GridPane>
               
               <Label text="Note: Please select the academic session and semester to view your marks and attendance." 
                     style="-fx-font-style: italic; -fx-text-fill: #7f8c8d;" wrapText="true" maxWidth="500" />
            </VBox>
         </Tab>
         
         <!-- Marks Tab -->
         <Tab text="Marks">
            <VBox spacing="15">
               <padding>
                  <Insets top="15" right="15" bottom="15" left="15" />
               </padding>
               
               <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Class Test Marks" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
               </HBox>
               
               <TableView fx:id="marksTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="courseCodeColumn" text="Course Code" prefWidth="100" />
                     <TableColumn fx:id="courseNameColumn" text="Course Name" prefWidth="200" />
                     <TableColumn fx:id="assessmentTypeColumn" text="Assessment Type" prefWidth="120" />
                     <TableColumn fx:id="marksColumn" text="Marks" prefWidth="80" />
                     <TableColumn fx:id="totalMarksColumn" text="Total Marks" prefWidth="100" />
                     <TableColumn fx:id="remarksColumn" text="Remarks" prefWidth="150" />
                     <TableColumn fx:id="dateColumn" text="Date" prefWidth="100" />
                  </columns>
                  <placeholder>
                     <Label text="No marks to display. Please select a session and semester." />
                  </placeholder>
               </TableView>
            </VBox>
         </Tab>
         
         <!-- Attendance Tab -->
         <Tab text="Attendance">
            <VBox spacing="15">
               <padding>
                  <Insets top="15" right="15" bottom="15" left="15" />
               </padding>
               
               <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Attendance Summary" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
               </HBox>
               
               <TableView fx:id="attendanceTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="attendanceCourseCodeColumn" text="Course Code" prefWidth="100" />
                     <TableColumn fx:id="attendanceCourseNameColumn" text="Course Name" prefWidth="200" />
                     <TableColumn fx:id="presentDaysColumn" text="Present Days" prefWidth="100" />
                     <TableColumn fx:id="absentDaysColumn" text="Absent Days" prefWidth="100" />
                     <TableColumn fx:id="attendancePercentageColumn" text="Attendance %" prefWidth="120" />
                     <TableColumn fx:id="attendanceMarksColumn" text="Attendance Marks" prefWidth="150" />
                  </columns>
                  <placeholder>
                     <Label text="No attendance data to display. Please select a session and semester." />
                  </placeholder>
               </TableView>
            </VBox>
         </Tab>
         
         <!-- Grades Tab -->
         <Tab text="Grades">
            <VBox spacing="15">
               <padding>
                  <Insets top="15" right="15" bottom="15" left="15" />
               </padding>
               
               <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Final Grades &amp; GPA" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Button fx:id="calculateGradesButton" text="Calculate Grades" onAction="#handleCalculateGrades"
                          style="-fx-background-color: #27ae60; -fx-text-fill: white;" />
                  <Button fx:id="generateTranscriptButton" text="Generate Transcript" onAction="#handleGenerateTranscript"
                          style="-fx-background-color: #9b59b6; -fx-text-fill: white;" />
               </HBox>
               
               <!-- GPA Summary Cards -->
               <GridPane hgap="20" vgap="15">
                  <columnConstraints>
                     <ColumnConstraints hgrow="SOMETIMES" />
                     <ColumnConstraints hgrow="SOMETIMES" />
                     <ColumnConstraints hgrow="SOMETIMES" />
                  </columnConstraints>
                  
                  <VBox GridPane.columnIndex="0" GridPane.rowIndex="0" spacing="10" 
                        style="-fx-background-color: #ecf0f1; -fx-padding: 20; -fx-background-radius: 10;">
                     <Label text="Current Semester GPA" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                     <Label fx:id="semesterGPALabel" text="0.00" style="-fx-font-size: 24px; -fx-text-fill: #2c3e50;" />
                  </VBox>
                  
                  <VBox GridPane.columnIndex="1" GridPane.rowIndex="0" spacing="10" 
                        style="-fx-background-color: #ecf0f1; -fx-padding: 20; -fx-background-radius: 10;">
                     <Label text="Cumulative GPA" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                     <Label fx:id="cumulativeGPALabel" text="0.00" style="-fx-font-size: 24px; -fx-text-fill: #2c3e50;" />
                  </VBox>
                  
                  <VBox GridPane.columnIndex="2" GridPane.rowIndex="0" spacing="10" 
                        style="-fx-background-color: #ecf0f1; -fx-padding: 20; -fx-background-radius: 10;">
                     <Label text="Total Credit Hours" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                     <Label fx:id="totalCreditsLabel" text="0" style="-fx-font-size: 24px; -fx-text-fill: #2c3e50;" />
                  </VBox>
               </GridPane>
               
               <TableView fx:id="gradesTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="gradesCourseCodeColumn" text="Course Code" prefWidth="100" />
                     <TableColumn fx:id="gradesCourseNameColumn" text="Course Name" prefWidth="200" />
                     <TableColumn fx:id="creditHoursColumn" text="Credit Hours" prefWidth="100" />
                     <TableColumn fx:id="finalMarksColumn" text="Final Marks" prefWidth="100" />
                     <TableColumn fx:id="letterGradeColumn" text="Grade" prefWidth="80" />
                     <TableColumn fx:id="gradePointColumn" text="Grade Point" prefWidth="100" />
                  </columns>
                  <placeholder>
                     <Label text="No grades to display. Click 'Calculate Grades' to compute final grades." />
                  </placeholder>
               </TableView>
            </VBox>
         </Tab>
         
         <!-- Performance Tab -->
         <Tab text="Performance">
            <VBox spacing="15">
               <padding>
                  <Insets top="15" right="15" bottom="15" left="15" />
               </padding>
               
               <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Performance Analysis" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Label text="Filter by Assessment Type:" />
                  <ComboBox fx:id="assessmentFilterComboBox" promptText="Select Type" />
               </HBox>
               
               <BarChart fx:id="performanceChart" VBox.vgrow="ALWAYS">
                  <xAxis>
                     <CategoryAxis fx:id="courseAxis" side="BOTTOM" />
                  </xAxis>
                  <yAxis>
                     <NumberAxis fx:id="marksAxis" side="LEFT" />
                  </yAxis>
               </BarChart>
            </VBox>
         </Tab>
         
         <!-- Notifications Tab -->
         <Tab text="Notifications">
            <VBox spacing="15">
               <padding>
                  <Insets top="15" right="15" bottom="15" left="15" />
               </padding>
               
               <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Recent Notifications" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Button fx:id="markAsReadButton" text="Mark as Read" 
                          style="-fx-background-color: #3498db; -fx-text-fill: white;" />
               </HBox>
               
               <ListView fx:id="notificationListView" VBox.vgrow="ALWAYS">
                  <placeholder>
                     <Label text="No notifications to display." />
                  </placeholder>
               </ListView>
            </VBox>
         </Tab>
         
      </TabPane>
   </center>
   
   <bottom>
      <HBox alignment="CENTER" style="-fx-background-color: #1a237e; -fx-padding: 10;">
         <Label text="EduVault Academic Management System © 2025 - Securing Academic Success" style="-fx-text-fill: white; -fx-font-size: 12px;" />
      </HBox>
   </bottom>
</BorderPane>
