flowchart TD
    Start([ðŸŽ¯ Start: Grade Entry Process]) --> SelectCourse[ðŸ“š Faculty Selects Course]
    
    SelectCourse --> LoadStudents[ðŸ‘¥ Load Enrolled Students List]
    LoadStudents --> SelectAssessment{ðŸ“ Select Assessment Type}
    
    SelectAssessment -->|Quiz| QuizEntry[ðŸ“Š Quiz Grade Entry]
    SelectAssessment -->|Assignment| AssignEntry[ðŸ“‹ Assignment Grade Entry]
    SelectAssessment -->|Midterm| MidtermEntry[ðŸ“ˆ Midterm Grade Entry]
    SelectAssessment -->|Final| FinalEntry[ðŸŽ¯ Final Exam Grade Entry]
    
    QuizEntry --> EnterGrades[âœï¸ Enter Individual Student Grades]
    AssignEntry --> EnterGrades
    MidtermEntry --> EnterGrades
    FinalEntry --> EnterGrades
    
    EnterGrades --> ValidateGrade{ðŸ” Validate Grade Range}
    ValidateGrade -->|Invalid Range| ShowRangeError[âŒ Grade Out of Range Error]
    ShowRangeError --> EnterGrades
    
    ValidateGrade -->|Valid| CheckComplete{âœ… All Students Graded?}
    CheckComplete -->|No| EnterGrades
    
    CheckComplete -->|Yes| ReviewGrades[ðŸ‘€ Review All Grades]
    ReviewGrades --> ConfirmGrades{âœ… Confirm Grade Entry?}
    
    ConfirmGrades -->|No| EnterGrades
    ConfirmGrades -->|Yes| SaveGrades[ðŸ’¾ Save Grades to Database]
    
    SaveGrades --> CalculateStats[ðŸ“Š Calculate Class Statistics]
    CalculateStats --> UpdateGPA[ðŸ“ˆ Update Student GPAs]
    
    UpdateGPA --> CheckPublish{ðŸ“¢ Publish Grades Now?}
    CheckPublish -->|No| SaveDraft[ðŸ“ Save as Draft]
    SaveDraft --> End1([ðŸ”š End: Grades Saved as Draft])
    
    CheckPublish -->|Yes| PublishGrades[ðŸ“¢ Publish Grades]
    PublishGrades --> GenerateReports[ðŸ“„ Generate Grade Reports]
    
    GenerateReports --> SendNotifications[ðŸ“§ Send Email Notifications]
    SendNotifications --> LogActivity[ðŸ“ Log Grade Entry Activity]
    
    LogActivity --> UpdateTranscripts[ðŸ“œ Update Student Transcripts]
    UpdateTranscripts --> End2([ðŸ”š End: Grades Successfully Published])

    %% Error Handling
    SaveGrades -->|Database Error| DBError[âŒ Database Connection Error]
    DBError --> RetryDB{ðŸ”„ Retry Database Operation?}
    RetryDB -->|Yes| SaveGrades
    RetryDB -->|No| End3([ðŸ”š End: Operation Failed])
    
    SendNotifications -->|Email Error| EmailError[âŒ Email Delivery Failed]
    EmailError --> LogEmailError[ðŸ“ Log Email Error]
    LogEmailError --> UpdateTranscripts

    %% Styling
    classDef startEnd fill:#c8e6c9,stroke:#4caf50,stroke-width:3px,color:#000
    classDef process fill:#e3f2fd,stroke:#2196f3,stroke-width:2px,color:#000
    classDef decision fill:#fff3e0,stroke:#ff9800,stroke-width:2px,color:#000
    classDef error fill:#ffebee,stroke:#f44336,stroke-width:2px,color:#000
    classDef success fill:#e8f5e8,stroke:#4caf50,stroke-width:2px,color:#000

    class Start,End1,End2,End3 startEnd
    class SelectCourse,LoadStudents,QuizEntry,AssignEntry,MidtermEntry,FinalEntry,EnterGrades,ReviewGrades,SaveGrades,CalculateStats,UpdateGPA,SaveDraft,PublishGrades,GenerateReports,SendNotifications,LogActivity,UpdateTranscripts,LogEmailError process
    class SelectAssessment,ValidateGrade,CheckComplete,ConfirmGrades,CheckPublish,RetryDB decision
    class ShowRangeError,DBError,EmailError error
